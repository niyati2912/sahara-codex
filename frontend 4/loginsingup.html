<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Join Sahara - Human Safety Network</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    :root {
        --primary: #6366f1;
        --primary-dark: #4f46e5;
        --secondary: #ec4899;
        --accent: #f59e0b;
        --success: #10b981;
        --danger: #ef4444;
        --dark: #0f172a;
        --gray-50: #f8fafc;
        --gray-100: #f1f5f9;
        --gray-200: #e2e8f0;
        --gray-300: #cbd5e1;
        --gray-400: #94a3b8;
        --gray-500: #64748b;
        --gray-600: #475569;
        --gray-700: #334155;
        --gray-800: #1e293b;
        --gray-900: #0f172a;
        --white: #ffffff;
        --helper-gradient: linear-gradient(135deg, #0ea5e9, #06b6d4);
        --user-gradient: linear-gradient(135deg, #6366f1, #4f46e5);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.6;
        background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
        color: var(--gray-800);
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* Header */
    .header {
        background: linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(241, 245, 249, 0.98));
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(99, 102, 241, 0.1);
        padding: 1rem 5%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 4px 20px rgba(99, 102, 241, 0.08);
    }

    .logo {
        font-size: 1.8rem;
        font-weight: 700;
        background: linear-gradient(135deg, #60a5fa, #5967ab);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-decoration: none;
    }

    .back-home {
        padding: 8px 20px;
        background: rgba(239, 232, 232, 0.1);
        color: rgba(5, 4, 4, 0.9);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 50px;
        cursor: pointer;
        font-weight: 500;
        text-decoration: none;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .back-home:hover {
        background: rgba(0, 0, 0, 0.2);
        color: rgb(23, 14, 14);
        border-color: rgba(255, 255, 255, 0.3);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    /* Main Container */
    .auth-container {
        display: flex;
        min-height: calc(100vh - 80px);
        position: relative;
    }

    /* Split Sections */
    .auth-side {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 2rem;
        position: relative;
        overflow: hidden;
        min-height: calc(100vh - 80px);
    }

    .helper-side {
        background: var(--helper-gradient);
        color: white;
    }

    .user-side {
        background: var(--user-gradient);
        color: white;
    }

    .helper-side::before,
    .user-side::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
        animation: float 20s ease-in-out infinite;
        pointer-events: none;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-10px) rotate(180deg); }
    }

    /* Auth Forms */
    .auth-form {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        padding: 2rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        border: 1px solid rgba(255, 255, 255, 0.2);
        width: 100%;
        max-width: 420px;
        position: relative;
        z-index: 2;
        color: var(--gray-800);
        margin: 2rem 0;
        flex-shrink: 0;
    }

    .form-header {
        text-align: center;
        margin-bottom: 1.5rem;
    }

    .form-icon {
        width: 56px;
        height: 56px;
        margin: 0 auto 1rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        color: white;
    }

    .helper-side .form-icon {
        background: var(--helper-gradient);
    }

    .user-side .form-icon {
        background: var(--user-gradient);
    }

    .form-header h2 {
        font-size: 1.6rem;
        font-weight: 700;
        margin-bottom: 0.25rem;
        color: var(--gray-900);
        line-height: 1.3;
    }

    .form-header p {
        color: var(--gray-600);
        font-size: 0.9rem;
        line-height: 1.4;
    }

    /* Form Tabs */
    .form-tabs {
        display: flex;
        background: var(--gray-100);
        border-radius: 10px;
        padding: 3px;
        margin-bottom: 1.5rem;
    }

    .tab-btn {
        flex: 1;
        padding: 8px 12px;
        background: transparent;
        border: none;
        border-radius: 7px;
        cursor: pointer;
        font-weight: 500;
        font-size: 0.9rem;
        color: var(--gray-600);
        transition: all 0.2s ease;
    }

    .tab-btn.active {
        background: white;
        color: var(--gray-900);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Form Content */
    .form-content {
        display: none;
    }

    .form-content.active {
        display: block;
    }

    .form-group {
        margin-bottom: 1.25rem;
    }

    .form-label {
        display: block;
        font-weight: 500;
        color: var(--gray-700);
        margin-bottom: 0.4rem;
        font-size: 0.85rem;
        line-height: 1;
    }

    .form-input {
        width: 100%;
        padding: 10px 14px;
        border: 1.5px solid var(--gray-300);
        border-radius: 10px;
        font-size: 0.95rem;
        transition: all 0.2s ease;
        background: var(--white);
        line-height: 1.4;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.08);
    }

    /* Submit Buttons */
    .submit-btn {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 0.75rem;
    }

    .helper-side .submit-btn {
        background: var(--helper-gradient);
        color: white;
        box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
    }

    .helper-side .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(14, 165, 233, 0.4);
    }

    .user-side .submit-btn {
        background: var(--user-gradient);
        color: white;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    }

    .user-side .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
    }

    .submit-btn:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        transform: none !important;
    }

    /* Divider */
    .divider {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 1px;
        height: 100%;
        background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.3), transparent);
        z-index: 10;
    }

    .divider-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255, 255, 255, 0.95);
        color: var(--gray-600);
        padding: 0.75rem 1.25rem;
        border-radius: 50px;
        font-weight: 500;
        font-size: 0.85rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        z-index: 11;
        white-space: nowrap;
    }

    /* Side Info */
    .side-info {
        width: 100%;
        max-width: 420px;
        text-align: center;
        z-index: 2;
        padding: 1rem;
        flex-shrink: 0;
    }

    .side-info h3 {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        opacity: 0.9;
        line-height: 1.3;
    }

    .side-info p {
        opacity: 0.8;
        font-size: 0.9rem;
        line-height: 1.4;
    }

    .features-list {
        list-style: none;
        margin-top: 0.75rem;
        opacity: 0.85;
        text-align: left;
        display: inline-block;
    }

    .features-list li {
        padding: 0.2rem 0;
        font-size: 0.8rem;
        line-height: 1.4;
    }

    .features-list li::before {
        content: '✓';
        margin-right: 0.5rem;
        font-weight: bold;
        color: rgba(255, 255, 255, 0.9);
    }

    /* Toast */
    .toast {
        visibility: hidden;
        min-width: 250px;
        margin-left: -125px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 10px;
        padding: 16px;
        position: fixed;
        z-index: 999;
        left: 50%;
        bottom: 30px;
        font-size: 14px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    .toast.show {
        visibility: visible;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }

    .toast.success {
        background-color: var(--success);
    }

    .toast.error {
        background-color: var(--danger);
    }

    @keyframes fadein {
        from { bottom: 0; opacity: 0; }
        to { bottom: 30px; opacity: 1; }
    }

    @keyframes fadeout {
        from { bottom: 30px; opacity: 1; }
        to { bottom: 0; opacity: 0; }
    }

    /* Responsive */
    @media (max-width: 768px) {
        .auth-container {
            flex-direction: column;
        }
        
        .auth-side {
            padding: 1.5rem;
            min-height: auto;
            justify-content: center;
            gap: 2rem;
        }
        
        .auth-form {
            max-width: 100%;
            padding: 1.5rem;
            margin: 0;
        }
        
        .divider,
        .divider-text {
            display: none;
        }
        
        .side-info {
            padding: 1rem;
            max-width: 100%;
        }
        
        .side-info h3 {
            font-size: 1.1rem;
        }
        
        .features-list {
            text-align: center;
        }
        
        .features-list li {
            font-size: 0.75rem;
        }
    }

    @media (max-width: 480px) {
        .auth-side {
            padding: 1rem;
            gap: 1.5rem;
        }
        
        .auth-form {
            padding: 1.25rem;
        }
        
        .form-header h2 {
            font-size: 1.4rem;
        }
        
        .form-input {
            padding: 9px 12px;
            font-size: 0.9rem;
        }
        
        .submit-btn {
            padding: 10px;
            font-size: 0.9rem;
        }
        
        .side-info h3 {
            font-size: 1rem;
        }
    }
</style>
</head>
<body>

<div class="header">
    <a href="#" class="logo">Sahara</a>
    <a href="landing.html" class="back-home">← Back to Home</a>
</div>

<div class="auth-container">
    <!-- Helper Side -->
    <div class="auth-side helper-side">
        <div class="auth-form">
            <div class="form-header">
                <div class="form-icon">🤝</div>
                <h2>Join as Helper</h2>
                <p>Become a verified volunteer and earn karma points</p>
            </div>
            
            <div class="form-tabs">
                <button class="tab-btn active" onclick="switchTab(this, 'helper-login')">Login</button>
                <button class="tab-btn" onclick="switchTab(this, 'helper-signup')">Sign Up</button>
            </div>
            
            <!-- Helper Login Form -->
            <div class="form-content active" id="helper-login">
                <form id="helperLoginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="helperLoginEmail" class="form-input" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="helperLoginPassword" class="form-input" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="submit-btn">Login as Helper</button>
                </form>
            </div>
            
            <!-- Helper Signup Form -->
            <div class="form-content" id="helper-signup">
                <form id="helperSignupForm">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" id="helperName" class="form-input" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="helperEmail" class="form-input" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="helperPassword" class="form-input" placeholder="Create a strong password" required>
                    </div>
                    <button type="submit" class="submit-btn">Join as Helper</button>
                </form>
            </div>
        </div>
        
        <div class="side-info">
            <h3>Why Be a Helper?</h3>
            <ul class="features-list">
                <li>Earn blockchain-verified karma points</li>
                <li>Redeem points for local services</li>
                <li>Build trusted community connections</li>
                <li>Make a real difference in lives</li>
            </ul>
        </div>
    </div>
    
    <!-- Divider -->
    <div class="divider"></div>
    <div class="divider-text">OR</div>
    
    <!-- User Side -->
    <div class="auth-side user-side">
        <div class="auth-form">
            <div class="form-header">
                <div class="form-icon">🛡️</div>
                <h2>Join as User</h2>
                <p>Get help when you need it most</p>
            </div>
            
            <div class="form-tabs">
                <button class="tab-btn active" onclick="switchTab(this, 'user-login')">Login</button>
                <button class="tab-btn" onclick="switchTab(this, 'user-signup')">Sign Up</button>
            </div>
            
            <!-- User Login Form -->
            <div class="form-content active" id="user-login">
                <form id="userLoginForm">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="userLoginEmail" class="form-input" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="userLoginPassword" class="form-input" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="submit-btn">Login</button>
                </form>
            </div>
            
            <!-- User Signup Form -->
            <div class="form-content" id="user-signup">
                <form id="userSignupForm">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" id="userName" class="form-input" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="userEmail" class="form-input" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="userPassword" class="form-input" placeholder="Create a strong password" required>
                    </div>
                    <button type="submit" class="submit-btn">Create Account</button>
                </form>
            </div>
        </div>
        
        <div class="side-info">
            <h3>Your Safety Matters</h3>
            <ul class="features-list">
                <li>24/7 verified helper network</li>
                <li>Real-time location sharing</li>
                <li>Instant emergency alerts</li>
                <li>Complete privacy protection</li>
            </ul>
        </div>
    </div>
</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<!-- Firebase + Script -->
<script type="module">
    // ======= FIREBASE CONFIG =======
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    // Replace with your Firebase config
    const firebaseConfig = {
        apiKey: "AIzaSyD6vqtV6apJ41XKyOjYxEIeIzt_DmaLnq0",
      authDomain: "sahara-cb829.firebaseapp.com",
      projectId: "sahara-cb829",
      storageBucket: "sahara-cb829.firebasestorage.app",
      messagingSenderId: "245992709744",
      appId: "1:245992709744:web:a96331ce109d79844fdeb5",
      measurementId: "G-G5LXE5110B"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // ======= TOAST FUNCTION =======
    function showToast(message, type = 'success') {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.className = `toast ${type} show`;
        setTimeout(() => { 
            toast.className = toast.className.replace("show", ""); 
        }, 3000);
    }

    // ======= SIGNUP HANDLER =======
 async function handleSignup(name, email, password, role) {
    try {
        const cred = await createUserWithEmailAndPassword(auth, email, password);
        await setDoc(doc(db, "users", cred.user.uid), {
            name,
            email,
            role,
            createdAt: new Date()
        });
        showToast(`${role} account created successfully!`, 'success');

        setTimeout(() => {
            window.location.href = "dashboard.html";
        }, 1500);

    } catch (err) {
        showToast(err.message, 'error');
    }
}

// ======= LOGIN HANDLER =======
async function handleLogin(email, password, role) {
    try {
        const cred = await signInWithEmailAndPassword(auth, email, password);
        showToast(`Welcome back! Redirecting to dashboard...`, 'success');

        setTimeout(() => {
            window.location.href = "dashboard.html";
        }, 2000);

    } catch (err) {
        showToast(err.message, 'error');
    }
}


    // ======= FORM LISTENERS =======
    document.getElementById("helperSignupForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const submitBtn = e.target.querySelector('.submit-btn');
        const originalText = submitBtn.textContent;
        
        submitBtn.textContent = 'Creating Account...';
        submitBtn.disabled = true;
        
        await handleSignup(
            document.getElementById("helperName").value,
            document.getElementById("helperEmail").value,
            document.getElementById("helperPassword").value,
            "helper"
        );
        
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    });

    document.getElementById("helperLoginForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const submitBtn = e.target.querySelector('.submit-btn');
        const originalText = submitBtn.textContent;
        
        submitBtn.textContent = 'Signing In...';
        submitBtn.disabled = true;
        
        await handleLogin(
            document.getElementById("helperLoginEmail").value,
            document.getElementById("helperLoginPassword").value,
            "helper"
        );
        
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    });

    document.getElementById("userSignupForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const submitBtn = e.target.querySelector('.submit-btn');
        const originalText = submitBtn.textContent;
        
        submitBtn.textContent = 'Creating Account...';
        submitBtn.disabled = true;
        
        await handleSignup(
            document.getElementById("userName").value,
            document.getElementById("userEmail").value,
            document.getElementById("userPassword").value,
            "user"
        );
        
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    });

    document.getElementById("userLoginForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const submitBtn = e.target.querySelector('.submit-btn');
        const originalText = submitBtn.textContent;
        
        submitBtn.textContent = 'Signing In...';
        submitBtn.disabled = true;
        
        await handleLogin(
            document.getElementById("userLoginEmail").value,
            document.getElementById("userLoginPassword").value,
            "user"
        );
        
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
    });
</script>

<script>
// Tab switching functionality
function switchTab(button, contentId) {
    const parent = button.closest('.auth-form');
    const tabs = parent.querySelectorAll('.tab-btn');
    const contents = parent.querySelectorAll('.form-content');
    
    tabs.forEach(tab => tab.classList.remove('active'));
    contents.forEach(content => content.classList.remove('active'));
    
    button.classList.add('active');
    document.getElementById(contentId).classList.add('active');
}

// Form validation enhancement
document.addEventListener('DOMContentLoaded', function() {
    const inputs = document.querySelectorAll('.form-input');
    
    inputs.forEach(input => {
        input.addEventListener('blur', function() {
            if (this.hasAttribute('required') && !this.value.trim()) {
                this.style.borderColor = 'var(--danger)';
            } else {
                this.style.borderColor = 'var(--gray-300)';
            }
        });
        
        input.addEventListener('input', function() {
            if (this.style.borderColor === 'rgb(239, 68, 68)') {
                this.style.borderColor = 'var(--gray-300)';
            }
        });
    });
});
</script>

</body>
</html>
